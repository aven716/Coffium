import{$a as j,A as r,Da as I,E as p,F as f,G as u,Ka as k,Na as L,P as x,R as w,S as C,U as M,Wa as T,X as P,Y as y,_a as E,aa as S,ab as W,j as g,l as c,m as b,mb as z,nb as H,ob as R,pb as B,q as i,r as o,s as m,u as _,wa as v,za as O}from"./chunk-KZXXQ5EB.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-PAKTAAC6.js";import"./chunk-BBW5KUYG.js";import"./chunk-677QIFDF.js";import"./chunk-G7CBOZIR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as h}from"./chunk-JHI3MBHO.js";var Q=(()=>{let l=class l{constructor(t,n,e,a){this.http=t,this.toastCtrl=n,this.menu=e,this.router=a,this.email="",this.password=""}showToast(t,n="medium"){return h(this,null,function*(){yield(yield this.toastCtrl.create({message:t,duration:2e3,color:n})).present()})}login(){if(!this.email||!this.password){this.showToast("Please enter email and password","danger");return}this.http.post("https://add2mart.shop/ionic/coffium/api/login.php",{email:this.email,password:this.password},{headers:new w({"Content-Type":"application/json"})}).subscribe(t=>{if(t.success&&t.user){let n=t.user.user_id||t.user.id||0;localStorage.setItem("user_id",n.toString()),localStorage.setItem("first_name",t.user.first_name||""),localStorage.setItem("last_name",t.user.last_name||""),this.http.post("https://add2mart.shop/ionic/coffium/api/login.php",{email:this.email,password:this.password}).subscribe(e=>{if(e.success&&e.user){let a=e.user.user_id;a?localStorage.setItem("user_id",String(a)):console.error("Login response missing user_id:",e),localStorage.setItem("first_name",e.user.first_name||""),localStorage.setItem("last_name",e.user.last_name||""),this.showToast("Login successful","success"),this.router.navigateByUrl("/home")}else this.showToast(e.message||"Login failed","danger")})}else this.showToast(t.message||"Login failed","danger")},t=>{console.error(t),this.showToast("Server error","danger")})}};l.\u0275fac=function(n){return new(n||l)(c(C),c(R),c(H),c(P))},l.\u0275cmp=b({type:l,selectors:[["app-login"]],decls:26,vars:2,consts:[[1,"register-page"],[1,"background-overlay"],[1,"register-container"],[1,"coffium-logo"],["src","assets/images/coffium_logo.png"],[1,"title"],[1,"subtitle"],[1,"register-card"],[1,"input-field"],["position","floating"],["type","email",3,"ngModelChange","ngModel"],["type","password",3,"ngModelChange","ngModel"],["expand","block",1,"register-btn",3,"click"],[1,"footer-text"],["routerLink","/register"]],template:function(n,e){n&1&&(i(0,"ion-content",0),m(1,"div",1),i(2,"div",2)(3,"div",3),m(4,"img",4),o(),i(5,"div",5),r(6,"Welcome to "),i(7,"span"),r(8,"Coffium"),o()(),i(9,"div",6),r(10,"Login to continue"),o(),i(11,"div",7)(12,"ion-item",8)(13,"ion-label",9),r(14,"Email"),o(),i(15,"ion-input",10),u("ngModelChange",function(s){return f(e.email,s)||(e.email=s),s}),o()(),i(16,"ion-item",8)(17,"ion-label",9),r(18,"Password"),o(),i(19,"ion-input",11),u("ngModelChange",function(s){return f(e.password,s)||(e.password=s),s}),o()(),i(20,"ion-button",12),_("click",function(){return e.login()}),r(21," Login "),o()(),i(22,"div",13),r(23," Don't have an account? "),i(24,"a",14),r(25,"Register here"),o()()()()),n&2&&(g(15),p("ngModel",e.email),g(4),p("ngModel",e.password))},dependencies:[B,L,T,E,j,W,k,z,x,I,v,O,M,S,y],styles:["ion-content.register-page[_ngcontent-%COMP%]{--background: #13442e;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:0 16px;position:relative;text-align:center;overflow:hidden}ion-content.register-page[_ngcontent-%COMP%]   .background-overlay[_ngcontent-%COMP%]{inset:0;background:radial-gradient(circle at top left,#a3b68a26,#13442ee6)}.register-container[_ngcontent-%COMP%]{width:100%;max-width:380px;z-index:1;display:flex;flex-direction:column;align-items:center;gap:12px;margin:40px auto}.title[_ngcontent-%COMP%]{font-size:1.9rem;font-weight:700;color:#fff;margin-top:20px;margin-bottom:10px;letter-spacing:1px}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#a3b68a}.subtitle[_ngcontent-%COMP%]{color:#c7b793;font-size:.95rem;margin-bottom:8px}.register-card[_ngcontent-%COMP%]{border-radius:20px;background-color:#ffffff1a;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);box-shadow:0 8px 32px #0003;width:100%;padding:18px 16px;box-sizing:border-box}.input-field[_ngcontent-%COMP%]{--background: transparent;--color: #ffffff;--placeholder-color: #d9d9d9;--highlight-color-focused: #a3b68a;--border-color: rgba(255, 255, 255, .3);color:#fff;margin-bottom:10px}.input-field[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#c7b793!important}.input-field[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#fff}.register-btn[_ngcontent-%COMP%]{margin-top:10px;--background: #a3b68a;--background-activated: #5c724a;--border-radius: 25px;font-weight:600;height:48px;color:#13442e}.footer-text[_ngcontent-%COMP%]{margin-top:10px;font-size:.9rem;color:#fff}.footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a3b68a;font-weight:600;text-decoration:none}.coffium-logo[_ngcontent-%COMP%]{width:140px;height:140px;border-radius:50%;background:#fff;padding:15px;box-shadow:0 6px 20px #ffffff1a;display:flex;justify-content:center;align-items:center;margin:25px 0 15px}.coffium-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120%;height:120%;object-fit:contain;border-radius:50%;transform:scale(2.1)}"]});let d=l;return d})();export{Q as LoginPage};
