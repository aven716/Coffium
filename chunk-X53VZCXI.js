import{a as Y}from"./chunk-KSYNFLFQ.js";import{$a as A,A as r,B as g,D as v,L as I,Ma as j,N as S,Na as D,P as k,S as y,U as E,Wa as V,X as T,Za as z,aa as U,ab as F,bb as H,e as f,f as u,gb as L,i as P,j as m,l as p,m as M,n as O,nb as B,ob as N,p as _,pb as R,q as t,r as o,s as a,t as h,u as x,v as C,y as w}from"./chunk-KZXXQ5EB.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-PAKTAAC6.js";import"./chunk-BBW5KUYG.js";import"./chunk-677QIFDF.js";import"./chunk-G7CBOZIR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as b}from"./chunk-JHI3MBHO.js";function J(l,s){if(l&1){let c=h();t(0,"div",4)(1,"div",5)(2,"ion-avatar"),a(3,"img",6),o(),t(4,"h2"),r(5),o(),t(6,"p",7),r(7),o()(),t(8,"div",8)(9,"ion-list",9)(10,"ion-item"),a(11,"ion-icon",10),t(12,"ion-label"),r(13),o()(),t(14,"ion-item"),a(15,"ion-icon",11),t(16,"ion-label"),r(17),o()()()(),t(18,"div",8)(19,"ion-list",9)(20,"ion-item",12),a(21,"ion-icon",13),t(22,"ion-label"),r(23,"My Orders"),o()(),t(24,"ion-item",12),a(25,"ion-icon",14),t(26,"ion-label"),r(27,"My Cart"),o()(),t(28,"ion-item",12),a(29,"ion-icon",15),t(30,"ion-label"),r(31,"Wishlist"),o()(),t(32,"ion-item",12),a(33,"ion-icon",16),t(34,"ion-label"),r(35,"Settings"),o()()()(),t(36,"ion-button",17),x("click",function(){f(c);let e=C();return u(e.logout())}),a(37,"ion-icon",18),r(38," Logout "),o()()}if(l&2){let c=C();m(3),_("src",c.user.profile_image||"assets/imgs/default-avatar.png",P),m(2),v("",c.user.first_name||"John"," ",c.user.last_name||"Doe"),m(2),g(c.user.email||"johndoe@email.com"),m(6),g(c.user.contact_no||"+63 900 000 0000"),m(4),g(c.user.address||"Cebu City, Philippines")}}function W(l,s){l&1&&(t(0,"div",19),a(1,"ion-spinner",20),t(2,"p"),r(3,"Loading profile..."),o()())}var ie=(()=>{let s=class s{constructor(i,e,n,d){this.menu=i,this.toastCtrl=e,this.http=n,this.router=d,this.user={user_id:0,first_name:"",last_name:"",email:"",contact_no:"",address:"",profile_image:"assets/images/default-profile.png"},this.loading=!0,this.userImageBaseUrl="https://add2mart.shop/ionic/coffium/api/images/profile_picture/"}ngOnInit(){this.waitForUserId()}onHeaderToggleMenu(){this.menu.enable(!0,"first"),this.menu.toggle("first")}waitForUserId(i=5){let e=localStorage.getItem("user_id");e?(this.user.user_id=+e,this.loadUserData(e)):i>0?(console.warn("User ID missing \u2014 retrying..."),setTimeout(()=>this.waitForUserId(i-1),500)):(console.error("User ID not found after retries."),this.loading=!1)}loadUserData(i){this.http.get(`https://add2mart.shop/ionic/coffium/api/get_user.php?user_id=${i}`).subscribe(e=>{if(e.success&&e.user){let n=e.user;this.user={user_id:+n.user_id||+n.id||0,first_name:n.first_name||"",last_name:n.last_name||"",email:n.email||"",contact_no:n.contact_no||"N/A",address:n.address||"N/A",profile_image:n.profile_image?this.userImageBaseUrl+n.profile_image:"assets/images/default-profile.png"}}else console.warn("User not found or API error:",e.message),this.showToast("Failed to load profile","danger");this.loading=!1},e=>{console.error("Error loading user:",e),this.showToast("Server error loading profile","danger"),this.loading=!1})}showToast(i,e){return b(this,null,function*(){yield(yield this.toastCtrl.create({message:i,duration:1500,color:e})).present()})}logout(){localStorage.removeItem("user_id"),this.showToast("Logged out successfully","medium"),this.router.navigate(["/login"])}};s.\u0275fac=function(e){return new(e||s)(p(B),p(N),p(y),p(T))},s.\u0275cmp=M({type:s,selectors:[["app-profile"]],decls:5,vars:2,consts:[["loadingState",""],["title","Profile",3,"menuClick"],[1,"profile-content"],["class","profile-wrapper",4,"ngIf","ngIfElse"],[1,"profile-wrapper"],[1,"profile-card"],["alt","Profile Picture",3,"src"],[1,"email"],[1,"profile-info"],["lines","none"],["name","call-outline","slot","start"],["name","home-outline","slot","start"],["button",""],["name","bag-outline","slot","start"],["name","cart-outline","slot","start"],["name","heart-outline","slot","start"],["name","settings-outline","slot","start"],["expand","block",1,"logout-btn",3,"click"],["name","log-out-outline","slot","start"],[1,"loading-container"],["name","crescent"]],template:function(e,n){if(e&1){let d=h();t(0,"app-header",1),x("menuClick",function(){return f(d),u(n.onHeaderToggleMenu())}),o(),t(1,"ion-content",2),O(2,J,39,6,"div",3)(3,W,4,0,"ng-template",null,0,I),o()}if(e&2){let d=w(4);m(2),_("ngIf",!n.loading)("ngIfElse",d)}},dependencies:[R,j,D,V,z,A,F,H,L,k,S,E,U,Y],styles:[".profile-content[_ngcontent-%COMP%]{--background: #f5f5f5;display:flex;justify-content:center;align-items:center;padding:24px;min-height:100vh}.profile-content[_ngcontent-%COMP%]   .profile-wrapper[_ngcontent-%COMP%]{width:100%;max-width:420px;text-align:center;display:flex;flex-direction:column;align-items:center;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.profile-content[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:25px 20px;box-shadow:0 8px 20px #00000014;margin-bottom:20px;width:100%;transition:all .2s ease}.profile-content[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:110px;height:110px;margin:0 auto 15px;border:4px solid #5c724a;border-radius:50%;overflow:hidden;box-shadow:0 4px 10px #5c724a4d}.profile-content[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.4rem;color:#2e4a25;font-weight:600;margin-bottom:4px}.profile-content[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]   p.email[_ngcontent-%COMP%]{color:#507d3b;font-size:.95rem;margin-bottom:0}.profile-content[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]{background:#fff;border-radius:15px;box-shadow:0 4px 14px #00000014;width:100%;margin-bottom:20px;text-align:left}.profile-content[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;color:#2e4a25;font-size:.95rem;border-bottom:1px solid #eee;transition:background .2s ease}.profile-content[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#507d3b;font-size:1.2rem}.profile-content[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.profile-content[_ngcontent-%COMP%]   .profile-info[_ngcontent-%COMP%]   ion-item[button][_ngcontent-%COMP%]:hover{background:#a3b68a1a}.profile-content[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]{margin-top:10px}.profile-content[_ngcontent-%COMP%]   .action-section[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#5c724a}.profile-content[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{background:#ffe5e5;color:#c62828;border:1.5px solid #c62828;border-radius:10px;font-weight:600;letter-spacing:.5px;width:100%;max-width:380px;box-shadow:none;transition:all .2s ease}.profile-content[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:hover{background:#ffd6d6;color:#b71c1c;border-color:#b71c1c}.profile-content[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]:active{transform:scale(.97)}.profile-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:80vh;color:#365c2a}.profile-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-bottom:10px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}.logout-btn[_ngcontent-%COMP%]{--background: #ffe5e5 !important;--color: #c62828 !important;--border-color: #c62828 !important;--box-shadow: none !important;--background-activated: #ffd6d6 !important;--background-focused: #ffd6d6 !important;--background-hover: #ffd6d6 !important;border:1.5px solid #c62828!important;border-radius:10px;font-weight:600;letter-spacing:.5px;margin-top:10px;width:100%;max-width:380px;transition:all .2s ease}.logout-btn[_ngcontent-%COMP%]:active{transform:scale(.97)}"]});let l=s;return l})();export{ie as ProfilePage};
