import{$a as V,A as a,Ba as b,Ca as w,Da as I,E as u,F as h,G as y,Ja as T,Na as k,P as _,S as x,U as v,V as C,Wa as S,X as P,_a as E,j as d,l as s,m as g,ob as j,pb as R,q as n,r,u as p,wa as M,za as O}from"./chunk-KZXXQ5EB.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-PAKTAAC6.js";import"./chunk-BBW5KUYG.js";import"./chunk-677QIFDF.js";import"./chunk-G7CBOZIR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as m}from"./chunk-JHI3MBHO.js";var L=(()=>{let o=class o{constructor(t,e,i,l){this.http=t,this.toastCtrl=e,this.route=i,this.router=l,this.email="",this.otp="",this.apiUrl="https://add2mart.shop/ionic/coffium/api/verify_otp.php"}ngOnInit(){this.route.queryParams.subscribe(t=>{this.email=t.email||""})}verifyOtp(){if(!this.email||!this.otp){this.showToast("Please enter the OTP code.","danger");return}this.http.post(this.apiUrl,{email:this.email,otp:this.otp}).subscribe({next:t=>{t.success?(localStorage.setItem("user_id",t.user_id),localStorage.setItem("user_email",t.email),this.router.navigate(["/home"])):this.showToast(t.message||"Invalid OTP.","danger")},error:t=>{console.error("Error verifying OTP:",t),this.showToast("Connection error. Please try again.","danger")}})}resendOtp(){this.showToast("Resend OTP feature coming soon!","medium")}showToast(t,e){return m(this,null,function*(){(yield this.toastCtrl.create({message:t,duration:2e3,color:e})).present()})}};o.\u0275fac=function(e){return new(e||o)(s(x),s(j),s(C),s(P))},o.\u0275cmp=g({type:o,selectors:[["app-verify-otp"]],decls:15,vars:1,consts:[[1,"verify-page"],[1,"verify-container"],[1,"title"],[1,"subtitle"],[1,"verify-card"],["lines","none"],["label","OTP Code","labelPlacement","floating","type","number","maxlength","6","name","otp","required","",3,"ngModelChange","ngModel"],["expand","block",1,"verify-btn",3,"click"],[1,"footer-text"],[3,"click"]],template:function(e,i){e&1&&(n(0,"ion-content",0)(1,"div",1)(2,"h1",2),a(3,"Verify Email"),r(),n(4,"p",3),a(5,"Enter the 6-digit code sent to your email"),r(),n(6,"div",4)(7,"ion-item",5)(8,"ion-input",6),y("ngModelChange",function(f){return h(i.otp,f)||(i.otp=f),f}),r()(),n(9,"ion-button",7),p("click",function(){return i.verifyOtp()}),a(10," Verify "),r(),n(11,"p",8),a(12," Didn\u2019t receive the code? "),n(13,"a",9),p("click",function(){return i.resendOtp()}),a(14,"Resend"),r()()()()()),e&2&&(d(8),u("ngModel",i.otp))},dependencies:[R,k,S,E,V,T,_,I,M,b,w,O,v],styles:["ion-content.verify-page[_ngcontent-%COMP%]{--background: #13442e;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:Poppins,sans-serif;color:#fff}.verify-container[_ngcontent-%COMP%]{width:100%;max-width:360px;text-align:center;margin:auto}.title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:8px;color:#fff}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;opacity:.9;margin-bottom:16px}.verify-card[_ngcontent-%COMP%]{background:#ffffff1a;border-radius:20px;padding:20px 16px;box-shadow:0 6px 20px #0003}ion-item[_ngcontent-%COMP%]{--background: transparent;--color: #ffffff;color:#fff}ion-input[_ngcontent-%COMP%]{color:#fff;font-size:1.2rem;text-align:center;letter-spacing:4px}.verify-btn[_ngcontent-%COMP%]{margin-top:14px;--background: #ffffff;color:#13442e;font-weight:600;border-radius:25px;height:48px}.footer-text[_ngcontent-%COMP%]{margin-top:12px;font-size:.9rem}.footer-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline;cursor:pointer}"]});let c=o;return c})();export{L as VerifyOtpPage};
