import{a as J}from"./chunk-KSYNFLFQ.js";import{A as r,B as u,C as P,D as S,Da as H,E as I,F as E,G as T,I as C,J as k,K as z,Ka as L,M as F,N as R,Na as Q,O as q,P as V,S as B,V as N,Wa as U,Za as W,e as g,f as m,gb as $,hb as D,i as O,j as c,l as h,m as y,n as x,nb as X,ob as Y,p,pb as G,q as e,r as i,s as b,t as v,u as _,v as l,wa as j,z as w,za as A}from"./chunk-KZXXQ5EB.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-PAKTAAC6.js";import"./chunk-BBW5KUYG.js";import"./chunk-677QIFDF.js";import"./chunk-G7CBOZIR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as M}from"./chunk-JHI3MBHO.js";var K=()=>[1,2,3,4,5];function Z(a,s){if(a&1&&b(0,"ion-icon",30),a&2){let n=s.$implicit,o=l(2);w("filled",n<=o.product.rating)}}function tt(a,s){if(a&1&&(e(0,"div",31)(1,"p",32),r(2),i(),e(3,"p",33),r(4),i()()),a&2){let n=s.$implicit;c(2),u(n.user_name),c(2),u(n.comment)}}function et(a,s){if(a&1){let n=v();e(0,"div",6),b(1,"img",7),e(2,"div",8)(3,"p",9),r(4),i(),e(5,"h2",10),r(6),i(),e(7,"p"),r(8),i(),e(9,"div",11),x(10,Z,1,2,"ion-icon",12),e(11,"span")(12,"p"),r(13),i()()(),e(14,"p",13),r(15,"Size: "),e(16,"span",14),r(17,"Medium"),i()(),e(18,"div",15)(19,"span",16),r(20,"S"),i(),e(21,"span",17),r(22,"M"),i(),e(23,"span",16),r(24,"L"),i(),e(25,"span",16),r(26,"XL"),i()(),e(27,"p",18),r(28),i(),e(29,"ul",19)(30,"li"),r(31,"Premium roasted beans"),i(),e(32,"li"),r(33,"Freshly packed for quality aroma"),i()(),e(34,"div",20)(35,"div",21)(36,"button",22),_("click",function(){g(n);let t=l();return m(t.decreaseQuantity())}),r(37,"-"),i(),e(38,"span",23),r(39),i(),e(40,"button",22),_("click",function(){g(n);let t=l();return m(t.increaseQuantity())}),r(41,"+"),i()(),e(42,"button",24),r(43,"Buy Now"),i(),e(44,"button",25),_("click",function(){g(n);let t=l();return m(t.addToCart(t.product,t.quantity))}),b(45,"ion-icon",26),i()(),e(46,"div",27)(47,"div",28),x(48,tt,5,2,"div",29),i()()()()}if(a&2){let n=l();c(),p("src",n.getProductImage(n.product.picture),O)("alt",n.product.product_name),c(3),P("\u20B1",n.product.price),c(2),u(n.product.product_name),c(2),P("Reviews (",n.product.totalRatings,")"),c(2),p("ngForOf",C(11,K)),c(3),S("",n.product.rating,"/5 (",n.product.totalRatings," ratings)"),c(15),u(n.product.description||"No description available for this product."),c(11),u(n.quantity),c(9),p("ngForOf",n.product.reviews)}}function nt(a,s){if(a&1){let n=v();e(0,"ion-icon",40),_("click",function(){let t=g(n).$implicit,d=l(2);return m(d.newRating=t)}),i()}if(a&2){let n=s.$implicit,o=l(2);w("filled",n<=o.newRating)}}function it(a,s){if(a&1&&(e(0,"div")(1,"p")(2,"strong"),r(3),i()(),e(4,"p"),r(5),i(),e(6,"small"),r(7),k(8,"date"),i()()),a&2){let n=s.$implicit;c(3),u(n.user_name),c(2),u(n.comment),c(2),u(z(8,3,n.created_at,"medium"))}}function ot(a,s){if(a&1){let n=v();e(0,"div",34)(1,"h3"),r(2,"Submit Your Review"),i(),e(3,"div",35)(4,"label"),r(5,"Rating:"),i(),x(6,nt,1,2,"ion-icon",36),i(),e(7,"ion-textarea",37),T("ngModelChange",function(t){g(n);let d=l();return E(d.newComment,t)||(d.newComment=t),m(t)}),i(),e(8,"ion-button",38),_("click",function(){g(n);let t=l();return m(t.submitReview())}),r(9,"Submit Review"),i(),x(10,it,9,6,"div",39),i()}if(a&2){let n=l();c(6),p("ngForOf",C(3,K)),c(),I("ngModel",n.newComment),c(3),p("ngForOf",n.product.comments)}}function rt(a,s){a&1&&(e(0,"div",41),b(1,"ion-spinner",42),e(2,"p"),r(3,"Loading product details..."),i()())}var xt=(()=>{let s=class s{constructor(o,t,d,f){this.route=o,this.http=t,this.menu=d,this.toastCtrl=f,this.productId=0,this.product=null,this.productBaseUrl="https://add2mart.shop/ionic/coffium/api/images/products/",this.quantity=1,this.user={user_id:0,first_name:"",last_name:"",profile_image:"assets/images/default-profile.png"},this.newRating=0,this.newComment=""}ngOnInit(){let o=localStorage.getItem("user_id");o&&(this.user.user_id=+o),this.productId=Number(this.route.snapshot.paramMap.get("id")),this.loadProduct()}onHeaderToggleMenu(){this.menu.enable(!0,"first"),this.menu.toggle("first")}getProductImage(o){return o?this.productBaseUrl+o:"assets/images/default-product.png"}increaseQuantity(){this.quantity++}decreaseQuantity(){this.quantity>1&&this.quantity--}addToCart(o,t){if(!this.user.user_id){this.showToast("Please log in first","danger");return}let d={user_id:this.user.user_id,product_id:o.product_id,quantity:t,unit_price:o.price};this.http.post("https://add2mart.shop/ionic/coffium/api/add_to_cart.php",d).subscribe(f=>this.showToast(f.message||"Added to cart","success"),f=>this.showToast("Failed to add to cart","danger"))}submitReview(){if(!this.user.user_id){this.showToast("Please log in first","danger");return}if(!this.newRating||!this.newComment.trim()){this.showToast("Please provide a rating and comment","warning");return}let o={user_id:this.user.user_id,product_id:this.product.product_id,rating:this.newRating,comment:this.newComment.trim()};this.http.post("https://add2mart.shop/ionic/coffium/api/submit_review.php",o).subscribe(t=>{t.success?(this.showToast("Review submitted","success"),this.loadProduct(),this.newRating=0,this.newComment=""):this.showToast(t.message||"Error submitting review","danger")},t=>this.showToast("Server error","danger"))}loadProduct(){let o=`https://add2mart.shop/ionic/coffium/api/get_product_details.php?product_id=${this.productId}`;this.http.get(o).subscribe(t=>{t.success?(this.product=t.product,this.product.rating=t.rating?.average||0,this.product.totalRatings=t.rating?.total||0,this.product.comments=t.comments||[]):console.warn("Product not found",t.error)},t=>console.error("Error loading product:",t))}showToast(o,t){return M(this,null,function*(){yield(yield this.toastCtrl.create({message:o,duration:1500,color:t})).present()})}};s.\u0275fac=function(t){return new(t||s)(h(N),h(B),h(X),h(Y))},s.\u0275cmp=y({type:s,selectors:[["app-product"]],decls:6,vars:5,consts:[[3,"toggleMenu","showSearchbar","showIcons"],["scrollEvents","true",1,"homepage-content"],[1,"page-background"],["class","product-card",4,"ngIf"],["class","review-submit-container",4,"ngIf"],["class","loading",4,"ngIf"],[1,"product-card"],[1,"product-img",3,"src","alt"],[1,"product-info"],[1,"price"],[1,"title"],[1,"rating-small"],["name","star",3,"filled",4,"ngFor","ngForOf"],[1,"label"],[1,"size-name"],[1,"size-options"],[1,"size-box"],[1,"size-box","active"],[1,"desc"],[1,"features"],[1,"btn-group"],[1,"quantity-selector"],[1,"qty-btn",3,"click"],[1,"qty-value"],[1,"buy-btn"],[1,"add-btn",3,"click"],["name","cart"],[1,"reviews-container"],[1,"reviews-list"],["class","review",4,"ngFor","ngForOf"],["name","star"],[1,"review"],[1,"review-user"],[1,"review-text"],[1,"review-submit-container"],[1,"rating-input"],["name","star",3,"filled","click",4,"ngFor","ngForOf"],["placeholder","Write your review...",3,"ngModelChange","ngModel"],["expand","block","color","primary",3,"click"],[4,"ngFor","ngForOf"],["name","star",3,"click"],[1,"loading"],["name","crescent"]],template:function(t,d){t&1&&(e(0,"app-header",0),_("toggleMenu",function(){return d.onHeaderToggleMenu()}),i(),e(1,"ion-content",1)(2,"div",2),x(3,et,49,12,"div",3)(4,ot,11,4,"div",4)(5,rt,4,0,"div",5),i()()),t&2&&(p("showSearchbar",!0)("showIcons",!0),c(3),p("ngIf",d.product),c(),p("ngIf",d.product),c(),p("ngIf",!d.product))},dependencies:[G,Q,U,W,$,D,L,V,F,R,H,j,A,J,q],styles:['@charset "UTF-8";.homepage-content[_ngcontent-%COMP%]{--background: whitesmoke}.page-background[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:30px 20px;gap:20px}.favorite-icon[_ngcontent-%COMP%]{color:red}.cart-icon[_ngcontent-%COMP%]{color:#69daa7}.product-card[_ngcontent-%COMP%]{max-width:380px;width:100%;background:#fff;border-radius:16px;box-shadow:0 4px 12px #0000001a;overflow:hidden;display:flex;flex-direction:column;align-items:flex-start;gap:12px}.product-img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.product-info[_ngcontent-%COMP%]{padding:18px 20px 24px}.price[_ngcontent-%COMP%]{font-weight:600;font-size:18px;margin:0;color:#354a2f}.title[_ngcontent-%COMP%]{font-size:20px;margin:4px 0 10px;font-weight:700;color:#5c724a}.label[_ngcontent-%COMP%]{font-size:14px;color:#666}.size-name[_ngcontent-%COMP%]{font-weight:600;color:#354a2f}.size-options[_ngcontent-%COMP%]{display:flex;gap:8px;margin:8px 0 14px}.size-box[_ngcontent-%COMP%]{padding:6px 12px;border:1.5px solid #c7b793;border-radius:6px;cursor:pointer;font-size:14px;color:#354a2f;background-color:#f5f5d5;transition:.2s ease}.size-box.active[_ngcontent-%COMP%]{background-color:#5c724a;color:#fff;border-color:#354a2f}.desc[_ngcontent-%COMP%]{font-size:14px;color:#555;line-height:1.6;margin:12px 0}.features[_ngcontent-%COMP%]{list-style:disc;margin:10px 0 20px 20px;padding:0;font-size:14px;color:#333}.btn-group[_ngcontent-%COMP%]{display:flex;gap:10px}.buy-btn[_ngcontent-%COMP%]{flex:4;padding:12px 0;border:none;border-radius:8px;font-weight:600;font-size:15px;cursor:pointer;transition:.2s ease}.add-btn[_ngcontent-%COMP%]{flex:2;padding:7px 0;border:none;border-radius:8px;font-weight:600;margin-bottom:0;cursor:pointer;transition:.2s ease;align-items:center}.add-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#354a2f;font-weight:700}.add-btn[_ngcontent-%COMP%]:hover{background-color:#a3b68a}.buy-btn[_ngcontent-%COMP%]{background-color:#5c724a;color:#fff}.buy-btn[_ngcontent-%COMP%]:hover{background-color:#354a2f}.loading[_ngcontent-%COMP%]{text-align:center;margin-top:60px;color:#354a2f}.quantity-selector[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:10px}.quantity-selector[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{width:30px;height:30px;border:1px solid #13442e;background:transparent;color:#13442e;font-weight:700;border-radius:4px}.quantity-selector[_ngcontent-%COMP%]   .qty-value[_ngcontent-%COMP%]{width:30px;text-align:center;font-weight:600}.btn-group[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:10px}.btn-group[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%], .btn-group[_ngcontent-%COMP%]   .buy-btn[_ngcontent-%COMP%]{margin-left:8px}.review-submit-container[_ngcontent-%COMP%]{max-width:380px;width:100%;background:#fff;border-radius:16px;box-shadow:0 4px 12px #0000001a;padding:20px;margin-top:20px;display:flex;flex-direction:column;gap:12px}.review-submit-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#354a2f;margin-bottom:10px}.review-submit-container[_ngcontent-%COMP%]   .rating-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.review-submit-container[_ngcontent-%COMP%]   .rating-input[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#c7b793;cursor:pointer;transition:.2s ease}.review-submit-container[_ngcontent-%COMP%]   .rating-input[_ngcontent-%COMP%]   ion-icon.filled[_ngcontent-%COMP%]{color:#5c724a}.review-submit-container[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 10px;--padding-bottom: 10px;border:1px solid #c7b793;border-radius:8px;resize:none;font-size:14px;color:#354a2f}.review-submit-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:10px;font-weight:600}.rating-small[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px;font-size:14px;margin:4px 0 10px;color:#f1c40f}.rating-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:#f1c40f}.rating-small[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin-left:6px;color:#f1c40f}']});let a=s;return a})();export{xt as ProductPage};
